CREATE TABLE PACIENTE (
DNI VARCHAR(255) NOT NULL,
NOMBRE VARCHAR(255) NOT NULL,
APELLIDOS VARCHAR(255) NOT NULL,
CORREO VARCHAR(255) NOT NULL,
TELEFONO INT NOT NULL,
CONSTRAINT PK_PACIENTE PRIMARY KEY (DNI)
)

CREATE TABLE CITA (
IDCITA VARCHAR(255) NOT NULL,
DNIPACIENTE VARCHAR(255) NOT NULL,
URGENTE BIT NOT NULL,
HORA_ENTRADA_ESTIMADA TIME ,
HORA_SALIDA_ESTIMADA TIME ,
PACIENTE_ACUDIDO BIT NOT NULL,
HORA_ENTRADA_REAL TIME,
HORA_SALIDA_REAL TIME,
FECHA DATE ,
CORREO_PACIENTE VARCHAR(255) NOT NULL,
TELEFONO_PACIENTE INT NOT NULL,
LUGAR_CITA VARCHAR(255) NOT NULL,
OTROS VARCHAR(255),
PRIORITARIO BIT,
CONSTRAINT PK_CITA PRIMARY KEY (IDCITA),
CONSTRAINT FK_CITA_PACIENTE FOREIGN KEY (DNIPACIENTE) REFERENCES PACIENTE (DNI)
)

CREATE TABLE MEDICO(
 idmedico INT NOT NULL,
 nombre varchar(20) NOT NULL,
 apellidos varchar(20) NOT NULL,
 correo varchar(50) NOT NULL,
 PRIMARY KEY (idmedico));
 
CREATE TABLE HISTORIAL (
IDHISTORIAL VARCHAR(255) NOT NULL,
TITULO VARCHAR(255) NOT NULL,
DESCRIPCION VARCHAR(255) NOT NULL,
DNIPACIENTE VARCHAR(255) NOT NULL,
IDMEDICO INT NOT NULL,
FECHA DATE NOT NULL,
PRIMARY KEY (IDHISTORIAL),
CONSTRAINT FK_HISTORIAL_PACIENTE FOREIGN KEY (DNIPACIENTE) REFERENCES PACIENTE (DNI),
CONSTRAINT FK_HISTORIAL_MEDICO FOREIGN KEY (IDMEDICO) REFERENCES MEDICO (IDMEDICO)
);

CREATE TABLE MEDICOCITA(
IDCITA VARCHAR(255) NOT NULL,
idmedico INT NOT NULL,
CONSTRAINT PK_MEDICOCITA PRIMARY KEY (IDCITA,IDMEDICO),
CONSTRAINT FK_MEDICOCITA_CITA FOREIGN KEY (IDCITA) REFERENCES CITA (IDCITA),
CONSTRAINT FK_MEDICOCITA_MEDICO FOREIGN KEY (IDMEDICO) REFERENCES MEDICO (IDMEDICO)
)

CREATE TABLE JORNADA (
IDJORNADA INT NOT NULL,
IDMEDICO INT NOT NULL,
DIA VARCHAR(255) NOT NULL,
INICIO Timestamp NOT NULL,
FIN Timestamp NOT NULL,
CONSTRAINT PK_IDJORNADA PRIMARY KEY (IDJORNADA),
CONSTRAINT FK_IDMEDICOE FOREIGN KEY (IDMEDICO) REFERENCES MEDICO (IDMEDICO)
)

CREATE TABLE ESPECIALIDAD(
IDESPECIALIDAD VARCHAR(255) NOT NULL,
CONSTRAINT PK_IDESPECIALIDAD PRIMARY KEY (IDESPECIALIDAD),

)

CREATE TABLE MEDICOESPECIALIDAD(
IDESPECIALIDAD VARCHAR(255) NOT NULL,
idmedico INT NOT NULL,
CONSTRAINT PK_MEDICOESPECIALIDAD PRIMARY KEY (IDESPECIALIDAD,IDMEDICO),
CONSTRAINT FK_MEDICOESPECIALIDAD_ESPECIALIDAD FOREIGN KEY (IDESPECIALIDAD) REFERENCES ESPECIALIDAD (IDESPECIALIDAD),
CONSTRAINT FK_MEDICOESPECIALIDAD_MEDICO FOREIGN KEY (IDMEDICO) REFERENCES MEDICO (IDMEDICO)
)

CREATE TABLE ESPECIALIDADCITA(
IDCITA VARCHAR(255) NOT NULL,
IDESPECIALIDAD VARCHAR(255)NOT NULL,
NMEDICOS INT ,
CONSTRAINT PK_ESPECIALIDADCITA PRIMARY KEY (IDCITA,IDESPECIALIDAD),
CONSTRAINT FK_ESPECIALIDADCITA_CITA FOREIGN KEY (IDCITA) REFERENCES CITA (IDCITA),
CONSTRAINT FK_ESPECIALIDADCITA_ESPECIALIDAD FOREIGN KEY (IDESPECIALIDAD) REFERENCES ESPECIALIDAD (IDESPECIALIDAD)
)

INSERT INTO PACIENTE values ('560483D', 'Jesus', 'Martin', 'jesus@martin.es', 666432)
INSERT INTO PACIENTE values ('535732D', 'Marta', 'Martin', 'marta@martin.es', 357522)
INSERT INTO CITA values ('1', '560483D', 0, '12:30:00', '13:00:00', 0, null, null, '2022-10-14', 'jesus@martin.es', 666432,'consulta_1','',0)
INSERT INTO CITA values ('2', '535732D', 0, '12:30:00', '13:00:00', 0, null, null, '2022-10-17', 'marta@martin.es', 357522,'consulta_1','',0)
INSERT INTO MEDICO values (1, 'Julia', 'Lopez', 'lopezjulia@gmail.com')
INSERT INTO HISTORIAL values ('1', 'Hepatitis', 'El paciente presenta una hepatitis tipo C cronica', '560483D', 1, '2022-10-10')
 
 
 
  INSERT INTO medico
(idmedico,nombre,apellidos,correo)
VALUES (12,'Felipe','Garcia Gomez','felipegarciagomez5@gmail.com');

INSERT INTO medico
(idmedico,nombre,apellidos,correo)
VALUES (13,'Diego','Martínez Menéndez ','felipegarciagomez5@gmail.com');

INSERT INTO medico
(idmedico,nombre,apellidos,correo)
VALUES (14,'Sergio' ,'Mate Suarez','felipegarciagomez5@gmail.com');

INSERT INTO "PUBLIC"."ESPECIALIDAD"
( "IDESPECIALIDAD" )
VALUES ( 'Traumatologia');

INSERT INTO "PUBLIC"."ESPECIALIDAD"
( "IDESPECIALIDAD" )
VALUES ( 'Primaria');

INSERT INTO "PUBLIC"."ESPECIALIDAD"
( "IDESPECIALIDAD" )
VALUES ( 'Cardiologia');

INSERT INTO "PUBLIC"."MEDICOESPECIALIDAD"
( "IDESPECIALIDAD", "IDMEDICO" )
VALUES ( 'Cardiologia',12 )

INSERT INTO "PUBLIC"."MEDICOESPECIALIDAD"
( "IDESPECIALIDAD", "IDMEDICO" )
VALUES ( 'Traumatologia',13 )
